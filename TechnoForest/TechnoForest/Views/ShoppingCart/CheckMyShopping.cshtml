@model TechnoForest.Models.ShopingCarts.SearchResultsViewModel

@{
    ViewData["Title"] = "CheckMyShopping";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var sum = Model.Result
        .Select(pr => pr.TotalPrice);

    decimal? resultOfTotalPrice = 0m;

    if (sum.Any())
    {
        resultOfTotalPrice = sum.Last();
    }
    <h5 style="color:white">
        Sum of total price is: @resultOfTotalPrice BGN
    </h5>
}
<table class="table table-hover">
    <thead>
        <tr>
            <th style="color:white" scope="col">Item Model</th>
            <th style="color:white" scope="col">Price</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Result)
        {

            @if (item.MobilePhones != null && item.MobilePhones.IsBought == true)
            {
                <tr>
                    <td style="color:white">@item.MobilePhones.ProductName - @item.MobilePhones.Model</td>
                    <td style="color:white">Price for product is: @item.MobilePhones.Price</td>
                    <td>
                        <button style="background-color:#34495e" id="buyItem" value="@item.MobilePhones.Id @item.MobilePhones.Price" class="btn btn-primary">Buy Item</button>
                    </td>
                    <td>
                        <button style="background-color:#34495e" id="rejectItem" value="@item.MobilePhones.Id @item.MobilePhones.Price" class="btn btn-primary">Reject Item</button>
                    </td>
                </tr>
            }

            @if (item.TVs != null && item.TVs.IsBought == true)
            {
                <tr>
                    <td style="color:white">@item.TVs.ProductName - @item.TVs.Model</td>
                    <td style="color:white">Price for product is: @item.TVs.Price</td>
                    <td>
                        <button style="background-color:#34495e" id="buyItem" value="@item.TVs.Id @item.TVs.Price" class="btn btn-primary">Buy Item</button>
                    </td>
                    <td>
                        <button style="background-color:#34495e" id="rejectItem" value="@item.TVs.Id @item.TVs.Price" class="btn btn-primary">Reject Item</button>
                    </td>
                </tr>
            }

            @if (item.WashingMachines != null && item.WashingMachines.IsBought == true)
            {
                <tr>
                    <td style="color:white">@item.WashingMachines.ProductName - @item.WashingMachines.Model</td>
                    <td style="color:white">Price for product is: @item.WashingMachines.Price</td>
                    <td>
                        <button style="background-color:#34495e" id="buyItem" value="@item.WashingMachines.Id @item.WashingMachines.Price" class="btn btn-primary">Buy Item</button>
                    </td>
                    <td>
                        <button style="background-color:#34495e" id="rejectItem" value="@item.WashingMachines.Id @item.WashingMachines.Price" class="btn btn-primary">Reject Item</button>
                    </td>
                </tr>
            }


            @if (item.Fridge != null && item.Fridge.IsBought == true)
            {
                <tr>
                    <td style="color:white">@item.Fridge.ProductName - @item.Fridge.Model</td>
                    <td style="color:white">Price for product is: @item.Fridge.Price</td>
                    <td>
                        <button style="background-color:#34495e" id="buyItem" value="@item.Fridge.Id @item.Fridge.Price" class="btn btn-primary">Buy Item</button>
                    </td>
                    <td>
                        <button style="background-color:#34495e" id="rejectItem" value="@item.Fridge.Id @item.Fridge.Price" class="btn btn-primary">Reject Item</button>
                    </td>
                </tr>
            }

            @if (item.AirConditioner != null && item.AirConditioner.IsBought == true)
            {
                <tr>
                    <td style="color:white" >@item.AirConditioner.ProductName - @item.AirConditioner.Model</td>
                    <td style="color:white">@item.AirConditioner.ProductName - @item.AirConditioner.Model</td>
                    <td>Price for product is: @item.AirConditioner.Price</td>
                    <td>
                        <button style="background-color:#34495e" id="buyItem" value="@item.AirConditioner.Id @item.AirConditioner.Price" class="btn btn-primary">Buy Item</button>
                    </td>
                    <td>
                        <button style="background-color:#34495e" id="rejectItem" value="@item.AirConditioner.Id @item.AirConditioner.Price" class="btn btn-primary">Reject Item</button>
                    </td>
                </tr>
            }
        }
    </tbody>
</table>